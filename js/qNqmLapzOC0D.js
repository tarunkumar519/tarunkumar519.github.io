"use strict";!function(e,t){"undefined"==typeof PlexConditionizr&&(t.PlexConditionizr=function(){var e={};return e.init=function(){conditionizr.add("retina",function(){return t.devicePixelRatio>=1.5}),conditionizr.add("chrome",function(){return!!t.chrome&&/google/i.test(navigator.vendor)}),conditionizr.add("safari",function(){return/Constructor/.test(t.HTMLElement)||function(e){return"[object SafariRemoteNotification]"===(!e||e.pushNotification).toString()}(t.safari)}),conditionizr.add("firefox",function(){return"InstallTrigger"in t}),conditionizr.add("touch",function(){return"ontouchstart"in t||!!navigator.msMaxTouchPoints}),conditionizr.config({assets:plex_l10n.path_to_css,tests:{safari:["class"],chrome:["class"],firefox:["class"],retina:["class"],touch:["class"]}})},e}()),e(document).ready(function(){conditionizr.on("retina",function(){e(".conditionizr-style").each(function(t,n){var i=e(this).data("alt-retina-style");i&&e(this).attr("style",i)})}),e(".conditionizr-style").removeAttr("data-alt-retina-style")})}(jQuery,window),function(e,t){var n="en_US";"undefined"==typeof PlexLanguage&&(t.PlexLanguage=function(){var i={},r="en_US";return i.init=function(){Transifex.live.onFetchLanguages(function(t){var i=e(".lang-selector #tip-languages");i.empty();for(var o=0;o<t.length;++o)if(!(!0!==plex_l10n.transifex.valid_languages&&plex_l10n.transifex.valid_languages.indexOf(t[o].code)<0)){var a=e("<a />"),s=plex_l10n.transifex.localized_urls[t[o].code];a.text(t[o].name).attr("href",s);var l=e("<li />");l.attr("data-code",t[o].code).attr("data-name",t[o].name).css("cursor","pointer").html(a),i.append(l)}e(".sel-language").html(Transifex.live.getLanguageName(n)),Transifex.live.onTranslatePage(function(t){e(".sel-language").html(Transifex.live.getLanguageName(t)),r=t})})},i.maybeRedirect=function(){var r=i.getSavedLang();if(!i.botCheck()&&r&&void 0===PlexUtils.getParam("langr")&&r!==n&&r!==Transifex.live.getSelectedLanguageCode()){var o=plex_l10n.transifex.localized_urls[r];if(void 0===o||!o)return void(Transifex.live.hasLanguageCode(r)||Cookies.remove("plex_tv_lang",{domain:PlexUtils.getCookieDomain()}));if(void 0===PlexUtils.getParam("lang")||PlexUtils.getParam("lang")!==r){e("#plex-language-redirect").show();var a="?";void 0!==t.location.search&&t.location.search&&(a=t.location.search,a+="&"),a+="langr=1",void 0!==t.location.hash&&t.location.hash&&(a+=t.location.hash),o+=a,t.location.replace(o)}}},i.getUserLang=function(){var e=navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage,t=i.getSavedLang();return t||"undefined"!=typeof Transifex&&(t=Transifex.live.normalizeLangCode(e)),t||"undefined"==typeof Transifex||(t=Transifex.live.getLanguageName(n)),t},i.getSavedLang=function(){var e=Cookies.get("plex_tv_lang");return!(null==e||!e)&&e},i.getSelectedLanguageCode=function(){try{var e=Transifex.live.getSelectedLanguageCode()}catch(e){return"en_US"}return void 0!==plex_l10n.transifex.href_lang_map[e]?plex_l10n.transifex.href_lang_map[e]:i.getUserLang()},i.setUserLang=function(e,t){if(null!=e){var n=PlexUtils.getCookieDomain();Cookies.set("plex_tv_lang",e,{domain:n,expires:365})}},i.languageSwitcher=function(){if(e(".header").is(":visible")){var t=i.getSavedLang(!0),r=e("#plex-language-bar");if(void 0===t||!t){var o=i.getUserLang(!0);if(n!==o&&Transifex.live.hasTargetLanguage(o)&&Transifex.live.getLanguageName(o)&&void 0!==plex_l10n.transifex.localized_urls[o]&&!function(e){return location.href.indexOf(plex_l10n.transifex.localized_urls[e])>=0}(o)){r.find(".site-language-switch").on("click",function(){i.setUserLang(o),r.slideUp()}).attr("href",plex_l10n.transifex.localized_urls[o]),r.find(".dismiss-language-switch").on("click",function(){return i.setUserLang(n),r.slideUp(),!1});var a=Transifex.live.getLanguageName(o);a&&r.find(".site-language-switch-language").text(a),r.show()}}}},i.botCheck=function(){return/bot|prerender|google|baidu|bing|msn|duckduckbot|teoma|slurp|yandex/i.test(navigator.userAgent)},i}()),"undefined"!=typeof Transifex&&Transifex.live.onReady(function(){PlexLanguage.init(),plex_l10n.transifex.js_redirect&&PlexLanguage.maybeRedirect(),PlexLanguage.languageSwitcher(),jQuery.tooltipster&&jQuery(".lang-selector .tooltip").tooltipster({trigger:"click",interactive:!0}),jQuery(document).on("click","#tip-languages a",function(){var e=jQuery(this).parent().data("code");void 0!==e&&e&&PlexLanguage.setUserLang(e)}),jQuery(document).ready(function(){var e=PlexLanguage.getSelectedLanguageCode()})})}(jQuery,window),function(e,t){var n={className:"lazy",notLazyClassName:"not-lazy",init:function(e,t,i){e=e||!1,n.className=t||n.className;var r=document.querySelectorAll("."+n.className);if(void 0===i)var i={rootMargin:"450px 0px"};for(var o=document.querySelectorAll("."+n.notLazyClassName),a=0;a<o.length;a++){o[a].removeAttribute("height")}n.observe(r,e,i)},observe:function(i,r,o){if(r=r||!("IntersectionObserver"in t)||!1)for(var a=0;a<i.length;a++){var s=i[a];n.applyImage(s)}else for(var l=new IntersectionObserver(function(t,i){for(var r=0;r<t.length;r++){var o=t[r];if(o.isIntersecting){var a=n.applyImage(o.target);a.classList.remove(n.className),e.event.trigger("PlexLazyLoad",a);const s=new CustomEvent("PlexLazyLoad",{detail:a});document.dispatchEvent(s)}}},o),a=0;a<i.length;a++){var s=i[a];l.observe(s)}},applyImage:function(e){if("VIDEO"===e.tagName){var t=e.children[0];t.src=t.dataset.src,e.load()}else e.getAttribute("data-src")?(e.getAttribute("data-sizes")&&e.setAttribute("sizes",e.getAttribute("data-sizes")),e.getAttribute("data-srcset")&&e.setAttribute("srcset",e.getAttribute("data-srcset")),e.setAttribute("src",e.getAttribute("data-src")),e.onload=function(){e.classList.add("js-loaded"),e.classList.add("fade-in"),e.removeAttribute("data-src"),e.removeAttribute("data-srcset"),e.removeAttribute("data-sizes")}):e.classList.add("js-loaded","fade-in");return e.classList.contains("animate-area")&&setTimeout(function(){e.classList.remove("fade-in")},550),e.removeAttribute("height"),e}};e(document).on("plex_site_init userStateChange",function(e){n.init()}),document.addEventListener("plexDoLazyload",function(e){n.init()},!1)}(jQuery,window),function(e,t){"undefined"==typeof PlexUtils?t.PlexUtils=function(){var n={},i={sandbox:"https://sandbox.api.plextv.dev",preview:"https://preview.api.plextv.dev",preview1:"https://preview1.api.plextv.dev",preview2:"https://preview2.api.plextv.dev",preview3:"https://preview3.api.plextv.dev",preview4:"https://preview4.api.plextv.dev",plex4:"https://staging1.plex.tv",development:"https://sandbox.api.plextv.dev"},r={sandbox:"https://auth.www.plextv.dev",preview:"https://auth.www.plextv.dev",preview1:"https://auth.www.plextv.dev",preview2:"https://auth.www.plextv.dev",preview3:"https://auth.www.plextv.dev",preview4:"https://auth.www.plextv.dev",plex4:"https://staging1-webloader.plex.tv",development:"https://auth.www.plextv.dev"},o={iOS:"https://itunes.apple.com/us/app/plex/id383457673?mt=8",Android:"https://play.google.com/store/apps/details?id=com.plexapp.android","Windows Phone":"https://www.microsoft.com/en-us/store/apps/plex/9wzdncrfj3q8"},a=null;return n.isDevelopment=function(){var t=e(location).attr("hostname"),i=new RegExp(/((\/\/(.*?)|)(staging|plex4).*?plex\.tv)/);return new RegExp(/((\/\/(.*?)|)(sandbox|preview.*).*?plextv\.dev)/).test(t)||i.test(t)||n.isLocalDevelopment()},n.isLocalDevelopment=function(){var t=e(location).attr("hostname");return new RegExp(/((\/\/(.*?)|)(.*-local).*?plextv\.dev)/).test(t)},n.getURLWithUTMParams=function(e){if(void 0===plex_l10n.utm_params)return e;var t=plex_l10n.utm_params,i=PlexMetrics.getUTMParams();i&&Object.keys(i).length?(Plex.debugLog()&&console.log("Using UTM's from 'plex_utm' cookie"),t=i):Plex.debugLog()&&console.log("Using auto generated UTM's cookie");for(var r in t)if(t.hasOwnProperty(r)){var o=t[r].replace(/\+/g,"%20");o=decodeURIComponent(o),e=n.setURLParameter(e,"utm_"+r,o)}return e=n.setURLParameter(e,"origin","marketing")},n.getDeviceWidth=function(){return t.innerWidth>0?t.innerWidth:screen.width},n.getAPIUrl=function(){var e="https://plex.tv";return n.isDevelopment()&&(e=n.getCurrentStagingAPIUrl()),e},n.getWebUrlBase=function(){var e="https://app.plex.tv";return n.isDevelopment()&&(e=n.getCurrentWebStagingAPIUrl()),PlexUser.hasRole("ninja")&&(e="https://ninjas.plex.tv"),e},n.getResetPasswordUrl=function(){return n.getWebUrlBase()+"/auth#?resetPassword"},n.getWebUrl=function(){return n.getWebUrlBase()+"/desktop"},n.getWebUrlSubPath=function(e){return n.getWebUrl()+"#!"+e},n.getMusicUrl=function(){var e="/desktop";return e+="#!/media/tv.plex.provider.music?key=%2Fhubs%2Fsections%2Ftidal&pageType=hub&context=content.tidal&source=tidal",n.getWebUrlBase()+e},n.getWebAppWatchlistURL=function(){return n.getWebUrl()+"#!?pivot=home.watchlist"},n.getMediaverseBaseURL=function(e){e=e||!1;var t="https://watch.plex.tv/";return n.isDevelopment()&&(t="https://watch.plex.tv/"),t+e},n.getMediaverseURL=function(e){return n.getMediaverseBaseURL(e)},n.getMediaverseCategoriesBaseURL=function(e){var t="movies-and-shows/category/";return"epg"===e&&(t="live-tv/category/"),n.getMediaverseBaseURL(t)},n.getMediaverseCategoryURL=function(e){return n.getMediaverseCategoriesBaseURL()+e},n.getMediaverseEpgCategoryURL=function(e){return n.getMediaverseCategoriesBaseURL("epg")+e},n.getMediaverseEpgChannelURL=function(e){var t="live-tv/channel/"+e;return n.getMediaverseBaseURL(t)},n.getAdminUrl=function(){return n.getAPIUrl()+"/admin"},n.getOtherServicesUrl=function(e){e=e||"other";var t=n.getAPIUrl()+"/users/other-services";switch(e){case"parsec":t=n.getAPIUrl()+"/users/auth/parsec"}return t},n.getCurrentStagingAPIUrl=function(){var e=Cookies.get("plex_tv_staging_url");return void 0!==e&&null!==e||(e=n.getDefaultStagingUrl()),e},n.getCurrentStagingEnv=function(){return e(location).attr("hostname").indexOf(".www.plextv.dev")>=0?e(location).attr("hostname").split(".www.plextv.dev")[0]:e(location).attr("hostname").split("-")[0]},n.getCurrentWebStagingAPIUrl=function(){var e=n.getCurrentStagingEnv(),t=Cookies.get("plex_tv_staging_web_url");return void 0!==t&&null!==t||(t=n.isLocalDevelopment()?r.development:r[e]),t},n.getApplicableAppStoreURL=function(){var e=n.getWebUrl();return"iOS"!==platform.os.family&&"Android"!==platform.os.family&&"Windows Phone"!==platform.os.family||(e=o[platform.os.family]),e},n.setCurrentStagingAPIUrl=function(e){Cookies.set("plex_tv_staging_url",e)},n.setCurrentStagingWebAPIUrl=function(e){Cookies.set("plex_tv_staging_web_url",e)},n.getStagingUrls=function(){var e={development:"http://api.plex.test"};if(!n.isLocalDevelopment()){var t=n.getCurrentStagingEnv();e[t]=i[t]}return e},n.getDefaultStagingUrl=function(){var e=n.getCurrentStagingEnv(),t=i[e];return n.isLocalDevelopment()&&(t=i.development),t},n.isSecure=function(){return-1!==location.protocol.indexOf("https")},n.isMobile=function(){var e=!1;return"iOS"!==platform.os.family&&"Android"!==platform.os.family&&"Windows Phone"!==platform.os.family||(e=!0),e},n.getIP=function(){return e.ajax({dataType:"json",url:"https://api.ipify.org/?format=json",timeout:5e3})},n.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},n.isReturningWebApp=function(){return document.referrer.indexOf(n.getWebUrlBase())>=0},n.GetURLParameter=function(e,n){var i=t.location.search.substring(1);if(n=void 0===n||n,!i&&n){var r=t.location.href.split("?");r.length>1&&(i=r[1])}for(var o=i.split("&"),a=0;a<o.length;a++){var s=o[a].split("=");if(s[0].toLowerCase()===e.toLowerCase())try{return decodeURIComponent(s[1])}catch(e){return s[1]}}},n.getParam=function(e){return n.GetURLParameter(e)},n.getParamsFromStringURL=function(e){for(var t={},n=[],i=e.replace(/^\?/,"").split("&"),r=0;r<i.length;r++)n=i[r].split("="),t[n[0]]=n[1];return t},n.getURLHash=function(){return void 0!==t.location.hash?t.location.hash:""},n.getPageForURL=function(e){e=void 0!==e?e:t.location.pathname;var n=e.replace(/\/$/,"");return n.substring(n.lastIndexOf("/")+1)},n.removeParam=function(e,n){n||(n=t.location.href);var i=n.split("#"),r=new RegExp("([?&])"+e+"=.*?(&|#|$)","i");return i[0].match(r)&&(n=i[0].replace(r,"$1"),n=n.replace(/([?&])$/,""),void 0!==i[1]&&null!==i[1]&&(n+="#"+i[1])),n},n.buildURLParams=function(e){var t="";for(var n in e)""!=t&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]);return t},n.setURLParameter=function(e,t,n){var t=encodeURIComponent(t),n=encodeURIComponent(n),i="",r=e.indexOf("#")>=0?e.substring(e.indexOf("#")):"";r&&(e=e.replace(r,""));var o=e.split("?")[0],a=t+"="+n,s="?"+a;if(void 0!==e.split("?")[1]&&(i="?"+e.split("?")[1]),i){var l=new RegExp("([?&])"+t+"[^&]*"),c=new RegExp("([?&])"+t+"=[^&;]+[&;]?");void 0===n||null===n||""===n?(s=i.replace(c,"$1"),s=s.replace(/[&;]$/,"")):s=null!==i.match(l)?i.replace(l,"$1"+a):""==i?"?"+a:i+"&"+a}return s="?"===s?"":s,e=o+s+r},n.appendParamToURLString=function(e,n){var i="",r="",o="";return void 0!==n&&void 0!==n.href&&n.href?(i=n.href,r=n.search,o=n.hash):(i=t.location.href,r=t.location.search,o=t.location.hash),i=i.replace(/#$/,""),r&&r.indexOf(e)>=0?i:(r?i=i.replace(r,r+"&"+e):(e="?"+e,o?i=i.replace(o,e+o):i+=e),i)},n.appendParamToURL=function(e){var i=n.appendParamToURLString(e);t.history.replaceState({},"",i)},n.setCache=function(e,t,n){var i=moment().add(n,"m").unix(),r={expiration:i,value:t};try{sessionStorage.setItem(e,JSON.stringify(r))}catch(e){return console.warn("Your browser doesn't support session storage."),!1}return!0},n.clearSessionCache=function(e){try{void 0!==e?sessionStorage.removeItem(e):sessionStorage.clear()}catch(e){console.warn("Your browser doesn't support session storage.")}},n.getCache=function(e,t){void 0===t&&(t=!1);var n=null;try{n=sessionStorage.getItem(e),null!==n&&(n=JSON.parse(n),n.expiration<moment().unix()?(sessionStorage.removeItem(e),n=null):t||(n=n.value))}catch(e){console.warn("Your browser doesn't support session storage."),n=null}return n},n.isNewEnvDomain=function(){var t=e(location).attr("hostname");return new RegExp(/((\/\/(\S+\.)*|)plextv\.dev)/).test(t)},n.getCookieDomain=function(){var e=".plex.tv";return n.isDevelopment()&&n.isNewEnvDomain()&&(e=".plextv.dev"),e},n.getForward=function(e){void 0===e&&(e=!1);var t=e?"ext_forward":"forward",i=n.getParam(t);if(void 0!==i)return decodeURIComponent(i);var r=null;try{r=sessionStorage.getItem(t)}catch(e){}return void 0!==r&&null!==r&&(i=r),void 0!==i?decodeURIComponent(i):i},n.saveForward=function(){var e=n.getParam("forward"),t=n.getParam("external_forward")||n.getParam("externalForward");try{void 0!==e&&sessionStorage.setItem("forward",e),void 0!==t&&sessionStorage.setItem("ext_forward",t)}catch(e){return console.warn("Your browser doesn't support session storage."),!1}},n.clearForward=function(){try{sessionStorage.removeItem("forward"),sessionStorage.removeItem("ext_forward")}catch(e){return console.warn("Your browser doesn't support session storage."),!1}},n.extend=function(e,t){var n,i={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i},n.redirect=function(e){var i=n.getForward(),r=n.getForward(!0),o=new RegExp("^(?:[a-z]+:)?//","i"),a=new RegExp("^/","i"),s="";if(s=n.isLocalDevelopment()?new RegExp(/(\/\/(\S+\.)*plex\.(dev|test|tv)(:\d+)?($|\/))/):new RegExp(/(\/\/(\S+\.)*plex\.tv(:\d+)?($|\/))/),void 0!==i){if(e=i,"web"===e.toLowerCase()&&(e=n.getWebUrl()),o.test(i)&&!s.test(i)){var l=new RegExp(/(\/\/(\S+\.)*plextv\.(dev)(:\d+)?($|\/))/);l.test(i)?c=!0:e="/"}}else if(void 0!==r){e=r;try{t.history.replaceState({},"Plex Media Server",t.location.origin+t.location.pathname)}catch(e){console.log("couldn't change the referer before the redirect")}o.test(r)?s.test(r)||(e="/"):e=n.getAPIUrl()+r}if(void 0===e)e="/";else if("/"!==e){var c=!1;if(a.test(e))c=!0;else if(o.test(e)){var u=document.createElement("a");u.href=e;var d=new RegExp(/^https:\/\/([^/]+[.])?(?:plex\.(tv|test)|tidal\.com)(\/.*)?$/);if(!(c=d.test(u.protocol+"//"+u.hostname))){var g=new RegExp(/^https:\/\/([^/]+[.])?(?:plextv\.dev)(\/.*)?$/);g.test(u.protocol+"//"+u.hostname)&&(c=!0)}}c||(e="/")}n.clearForward(),t.location.href=e},n.redirectSignedInUser=function(){var e=null;n.getParam("forwardUrl")?e=n.getParam("forwardUrl"):n.getParam("fwdUrl")&&(e=n.getParam("fwdUrl")),n.redirect(e)},n.validateEmail=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},n.isMobile=function(){return/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},n.isSafari=function(){var e=navigator.userAgent.toLowerCase().indexOf("chrome")>-1,t=navigator.userAgent.toLowerCase().indexOf("safari")>-1;return!e&&t},n.cfTurnstileRemove=function(e){"undefined"!=typeof turnstile&&turnstile.remove(e)},n.cfTurnstile=function(e,t,i,r,o){if("undefined"!=typeof turnstile){var a={sitekey:t.site_key,appearance:n.isSafari()&&!n.isMobile()?"always":"interaction-only","error-callback":r,"before-interactive-callback":r,callback:i};o&&(a["expired-callback"]=o);return turnstile.render(e,a)}},n.cfTurnstileReset=function(e){"undefined"!=typeof turnstile&&turnstile.reset(e)},n.isFlexGapSupported=function(){if(null!=a)return a;if("undefined"==typeof document)return!1;var e=document.createElement("div");return e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e),a=1===e.scrollHeight,e.parentNode.removeChild(e),a},n.sanitizeString=function(e){return e=e.replaceAll("<script>",""),e=e.replaceAll("<\/script>","")},n.showErrorsOnForm=function(t,n){e.each(this.validElements(),function(t,n){var i=e(n).parent(),r=i.find(".icomoon"),o="icon-form-success";i.find(".field-error").html("").hide(),i.hasClass("no-checkmark")&&(o=r.data("original-icon")),r.removeClass(function(e,t){return(t.match(/(^|\s)icon-\S+/g)||[]).join(" ")}).addClass(o),i.removeClass("input-field-error").addClass("input-field-success")}),e.each(n,function(t,n){var i=e(n.element).parent();i.find(".icomoon").removeClass(function(e,t){return(t.match(/(^|\s)icon-\S+/g)||[]).join(" ")}).addClass("icon-form-error"),i.find(".field-error").html(n.message).show(),i.removeClass("input-field-success").addClass("input-field-error")})},n}():console.log("PlexUtils is already defined."),e(document).ready(function(){})}(jQuery,window),function(e,t){"undefined"==typeof PlexFlags?t.PlexFlags=function(){var t={},n=null,i={music:"e7cea823-02e5-48c4-a501-d37b82bf132f"},r=plex_l10n.feature_flags_active,o=plex_l10n.feature_flags_actions;return t.getFeaturesTree=function(){var e=PlexUtils.getCache("plex_features_tree");return Plex.debugLog()&&null!==e&&PlexUtils.getParam("feature_flag")&&(PlexUtils.getParam("feature_flag"),e[i[PlexUtils.getParam("feature_flag")]]=!0),e},t.refreshFeaturesTree=function(i){var r=e.Deferred();if(!t.activeFeatureFlags())return r.resolve();if(i=void 0!==i&&i,i&&PlexUtils.clearSessionCache("plex_features_tree"),void 0!==(n=t.getFeaturesTree())&&null!==n)return r.resolve(n);var o={"X-Plex-Product":"Plex SSO","X-Plex-Client-Identifier":Plex.getClientIdentifier()};return Plex.isSignedIn()&&(o["X-Plex-Token"]=Plex.getAuthToken()),e.ajax({dataType:"json",type:"GET",headers:o,url:PlexUtils.getAPIUrl()+"/api/v2/features.json",crossDomain:!0}).always(function(t,i){n={},"error"!==i?(e.each(t,function(e,t){n[t.uuid]=!0}),PlexUtils.setCache("plex_features_tree",n,10),r.resolve(n)):r.resolve(),Plex.debugLog()&&console.log("Updated features tree")}),r.promise()},t.activeFeatureFlags=function(){return!(void 0===r||void 0===o||!r.length)},t.skipFeatureFlags=function(e){return e=void 0!==e?e:"",!(t.activeFeatureFlags()&&!(e&&r.indexOf(e)<0))},t.getFeatureState=function(e){if(t.skipFeatureFlags(e))return!0;var n=!1,i=t.getFeaturesTree();return null!==i&&i.hasOwnProperty(e)&&(n=i[e]),Plex.debugLog()&&console.log("Feature flag "+e+" state is "+n),n},t.getFeatureStateByType=function(e){return!!t.skipFeatureFlags(e)||void 0!==i[e]&&t.getFeatureState(i[e])},t.hasAccessToFeature=function(e){return t.getFeatureStateByType(e)},t.refreshUI=function(){t.skipFeatureFlags()||void 0!==o.selectors&&t.doUISelectors(o.selectors)},t.doUISelectors=function(n){e.each(n,function(n,i){var r="",a=e(i).data("groupDisplay");Plex.debugLog()&&console.log("Checking features flags UI selectors for "+n+" :: "+i),void 0!==a&&(r=e("."+a));var s=t.getFeatureStateByType(n);void 0!==o.alt_classes&&void 0!==o.alt_classes[a]&&t.doUIAltClasses(s,r,o.alt_classes[a]),s?e(i).not(":visible").fadeIn():e(i).hide()})},t.doUIAltClasses=function(e,t,n){var i=n.default,r=n.alt;Plex.debugLog()&&console.log("Checking UI alt classes for the feature"),t.removeClass(i+" "+r),e?t.addClass(i):t.addClass(r)},t.doUIAltClasses__=function(n){e.each(n,function(n,i){e.each(i,function(i,r){var o=r.default,a=r.alt,s=r.child_selectors;e(i).removeClass(o+" "+a),e(i).find(s).hasClass(s),t.getFeatureStateByType(n)?e(i).addClass(o):e(i).addClass(a)})})},t}():console.log("PlexFlags is already defined."),e(document).ready(function(){PlexView.addAfterRenderHook(function(){PlexFlags.refreshFeaturesTree().then(PlexFlags.refreshUI)})})}(jQuery,window),function(e,t){"undefined"==typeof PlexMetrics?t.PlexMetrics=function(){var n={},i=[],r=!1,o=function(){for(var e=t.location.search.substring(1),n=e.split("&"),i={},r=0;r<n.length;r++){var o=n[r].split("=");-1!==o[0].toLowerCase().indexOf("utm_")&&(i[o[0].replace("utm_","")]=decodeURIComponent(o[1]))}return i},a=function(){var e=o();return void 0!==e&&Object.keys(e).length>0},s=function(){var e=n.getUTMParams();return void 0!==e&&Object.keys(e).length>0};return n.pushEvent=function(t,n,i){void 0===i&&(i={}),void 0!==n&&n||(n=function(){});e.extend(i,{event:t,eventCallback:n}),dataLayer.push(i),Plex.debugLog()&&(console.log("Pushed event "+t),console.log(i))},n.loadUTMParams=function(){if(a()){var e=o(),t=PlexUtils.getCookieDomain();PlexUtils.getParam("utm_internal")&&s()&&(e=n.getUTMParams(),e.internal=decodeURIComponent(PlexUtils.getParam("utm_internal"))),Cookies.set("plex_utm",e,{domain:t}),n.track("attribution","marketing")}},n.getUTMParams=function(e){e=e||!1;var t=Cookies.getJSON("plex_utm"),n=e?o():{};return void 0!==t&&t?t:n},n.track=function(e,t,o,a){r?n.execTrackMetric(e,t,o,a):i.push({category:e,action:t,options:o})},n.execTrackMetric=function(i,r,o,a){void 0===o&&(o={}),void 0===a&&(a=function(){});var s=Plex.isSignedIn()?Plex.getAuthInfo().id:null;!s&&PlexUtils.getParam("userId")&&(s=PlexUtils.getParam("userId"));var l=document.referrer.indexOf("webloader.plex.tv")>=0?document.baseURI:document.referrer,c={userId:s,deviceIdentifier:Plex.getClientIdentifier(),event:"client:"+i,interaction:!0,properties:{page:r,context:e(location).attr("origin")+e(location).attr("pathname")},context:{referer:l,campaign:n.getUTMParams(),device:{product:e(location).attr("hostname"),platform:platform.name,platformVersion:platform.version,device:platform.os.family,layout:t.innerWidth<=600?"Mobile":"Desktop"}}},u=e.extend(!0,c,o);e.ajax({type:"POST",url:PlexUtils.isDevelopment()?"https://analytics-stage.plex.tv/collect/event":"https://analytics.plex.tv/collect/event",contentType:"application/json",data:JSON.stringify(u),error:function(e){Plex.debugLog()&&console.log("Couldn't track the plex metric "+i+":"+r)}}).always(function(){Plex.debugLog()&&(console.log("Pushed metric ..."),console.log(u));var e=new CustomEvent("metric",{detail:u});document.dispatchEvent(e),a()})},n.execAllMetricEvents=function(){r=!0,e.each(i,function(e,t){n.execTrackMetric(t.category,t.action,t.options)})},n.hasIterableData=function(){return!1!==n.getIterableCampaignId()&&!1!==n.getIterableTemplateId()},n.getIterableCampaignId=function(){return Cookies.get("iterableEmailCampaignId")||!1},n.getIterableTemplateId=function(){return Cookies.get("iterableTemplateId")||!1},n}():console.log("PlexMetrics is already defined."),e(document).ready(function(){})}(jQuery,window),function(e,t){"undefined"==typeof Plex?t.Plex=function(){var t={},n={},i=plex_l10n.pages.signin,r=plex_l10n.pages.signup,o=!1,a=!1,s=["pass","tidal"],l={regular:"currency",tidal:"country",arcade:"currency"},c=0,u=function(){var t=e("<div />").attr("class","loader loader-small loader-inline").show(),n=e("<div />").attr("class","loader-wrap").html(t),i=e("<div />").attr("class","loader-price-card-skel").html("&nbsp;").show();e(".button .pp-price-feature[data-pp-price-feature]").html(n.show()),e(".pp-plan-card .pp-price-feature[data-pp-price-feature]").not(".title, .currencycode").html(i.show())};return t.expHelper={ready:!1,features:[],handlers:{},featureAdd:function(e){this.features.indexOf(e)<0&&this.features.push(e)},handlerAdd:function(e,t){this.handlers[e]=t},featureIsApplicableToExperiment:function(e){return!this.ready||this.features.indexOf(e)>=0}},t.Tidal={plansFree:{hifi_bundle_trial:"Tidal with DJ Extension Trial",premium_bundle_trial:"Tidal Trial",hifi_bundle:"Tidal with DJ Extension",premium_bundle:"Tidal"},plansPP:{hifi_trial:"Tidal Tidal with DJ Extension Trial Add-On",premium_trial:"Tidal Trial Add-On",premium_addon_trial:"Tidal Add-On Trial",hifi_addon_trial:"Tidal Tidal with DJ Extension Add-On Trial",hifi:"Tidal with DJ Extension Add-On",premium:"Tidal Add-On"},bundleCurrencies:["USD","CAD","AUD","GBP","EUR","DKK","CHF","NZD","NOK","SEK"],getFreePlans:function(){return Object.keys(this.plansFree)},getPPPlans:function(){return Object.keys(this.plansPP)},getAllPlans:function(){return this.getFreePlans().concat(this.getPPPlans())},getValidBundleCurrencies:function(){return this.bundleCurrencies},validPlans:function(e){return!(this.getAllPlans().indexOf(e)<0)&&(t.hasActivePlexPass()?this.getPPPlans():this.getFreePlans())},isAddOn:function(e){return t.Tidal.getPPPlans().indexOf(e)>=0},isBundle:function(e){return this.getFreePlans().indexOf(e)>=0},isValidBundleCurrency:function(e){return this.bundleCurrencies.indexOf(e)>=0}},t.Gaming={plansFree:{with_plexpass:"Plex Arcade"},plansPP:{without_plexpass:"Plex Arcade"},getFreePlans:function(){return Object.keys(this.plansFree)},getPPPlans:function(){return Object.keys(this.plansPP)},getAllPlans:function(){return this.getFreePlans().concat(this.getPPPlans())},validPlans:function(e){return!(this.getAllPlans().indexOf(e)<0)&&(t.hasActivePlexPass()?this.getPPPlans():this.getFreePlans())}},t.debugLog=function(){return PlexUtils.isDevelopment()||PlexUtils.isLocalDevelopment()||plex_l10n.js_debug_log},t.signInGuard=function(e){return!!t.isSignedIn()||(void 0!==e?(t.signUpRedirect(),!1):(t.signInRedirect(),!1))},t.getSignInPage=function(e){return e=void 0!==e?e:"",i+e},t.getSignUpPage=function(e){return e=void 0!==e?e:"",r+e},t.setIsSigninIn=function(e){var n=t.isSignedIn();e=void 0===e||e,o=e,n!==e&&PlexTemplating.userStateChanged()},t.isSigninIn=function(){return o},t.isSignedIn=function(){try{var e=localStorage.getItem("plex_tv_auth")}catch(e){return console.warn("Your browser doesn't support local storage."),void 0!==Cookies.get("plex_tv_auth")}return!!e},t.signInRedirect=function(e){e=void 0!==e&&e?e:location.href,PlexUtils.redirect(t.getSignInPage("/?forwardUrl="+encodeURIComponent(e)))},t.signUpRedirect=function(e){e=void 0!==e&&e?e:location.href,PlexUtils.redirect(t.getSignUpPage("/?forwardUrl="+encodeURIComponent(e)))},t.getClientIdentifier=function(){var e=!1;return void 0===Cookies.get("plex_tv_client_identifier")?(e=PlexUtils.guid(),t.setClientIdentifier(e)):e=Cookies.get("plex_tv_client_identifier"),e},t.setClientIdentifier=function(e){Cookies.set("plex_tv_client_identifier",e,{expires:3650,sameSite:"Strict"})},t.getAuthInfo=function(){try{var e=localStorage.getItem("plex_tv_auth")}catch(e){return console.warn("Your browser doesn't support local storage."),null}if(e)return JSON.parse(e);if(PlexUtils.isDevelopment()){var n=PlexUtils.getCurrentStagingEnv();e=Cookies.getJSON("plex_tv_auth_"+n)}else e=Cookies.getJSON("plex_tv_auth");return void 0!==e&&(t.setAuthInfo(e),Cookies.remove("plex_tv_auth")),e},t.isRefreshingInfo=function(e){var t=void 0!==e,n=!0;return t&&(n=PlexUtils.isReturningWebApp()||PlexUtils.getAPIUrl()),"1"===PlexUtils.getParam("refreshInfo")&&n},t.getAuthToken=function(){var e=t.getAuthInfo();if(e)return e.authToken},t.checkTokenExpiration=function(){var e=t.getAuthInfo();e&&void 0!==e.expires_at&&moment.unix(e.expires_at)<moment().unix()&&t.removeAuthInfo()},t.setAuthInfo=function(n,i){t.clearCachedPricing(),t.isSignedIn()||PlexView.setRunHooks(!0),n.lstorage_at=moment().unix(),!0===i&&(n.expires_at=moment.unix(n.lstorage_at).add(14,"days").unix());try{localStorage.setItem("plex_tv_auth",JSON.stringify(n)),t.SSOSyncCookie()}catch(e){console.warn("Your browser doesn't support local storage.")}PlexUser.cacheSubscriptions(n.subscriptions),PlexFlags.refreshFeaturesTree(!0).always(function(){(PlexView.refreshView()||PlexView.runViewHooks())&&PlexView.refresh()}),t.setIsSigninIn(!1),PlexTemplating.userStateChanged(),e(document).trigger("userStateChange")},t.removeAuthInfo=function(n){n=void 0!==n&&n,t.isSignedIn()&&PlexView.setRunHooks(!0);try{localStorage.removeItem("plex_tv_auth"),t.SSOSyncCookie()}catch(e){console.warn("Your browser doesn't support local storage.")}PlexUtils.clearSessionCache(),PlexUser.clearSubscriptions(),PlexFlags.refreshFeaturesTree(!0).then(function(){!PlexView.refreshView()&&!PlexView.runViewHooks()||n||PlexView.refresh()}),PlexTemplating.userStateChanged(),e(document).trigger("userStateChange"),localStorage.removeItem("plex_tv_dt_update")},t.hasActivePlexPass=function(){return t.debugLog()&&PlexUtils.getParam("plexpass")?Boolean(parseInt(PlexUtils.getParam("plexpass"))):!!t.getAuthInfo()&&t.getAuthInfo().subscription.active},t.remainingPlexPassDays=function(){if(t.debugLog()&&PlexUtils.getParam("expriginpp"))return parseInt(PlexUtils.getParam("expriginpp"));if(!t.getAuthInfo()||!t.hasActivePlexPass())return!1;var e=t.getAuthInfo().subscription,n="yearly"===e.plan?365:30,i=new Date,r=new Date(e.subscribedAt);r.setDate(r.getDate()+n);var o=r.getTime()-i.getTime();return Math.ceil(o/864e5)},t.hasActiveSubscriptions=function(e){var t=PlexUser.getSubscriptionsInfo()||!1,n=!1;if(!t)return n;e=e||!1;for(var i=0;i<t.length;++i)if("lifetime"!==t[i].mode&&"comped"!==t[i].mode&&(!e||t[i].state===e))return n=!0,!0;return n},t.hasActiveMusicPass=function(e){return t.debugLog()&&PlexUtils.getParam("musicpass")?Boolean(parseInt(PlexUtils.getParam("musicpass"))):(e=void 0!==e?e:"tidal",t.hasActiveTidalSubsc()&&!t.hasActivePlexPass())},t.hasActiveTidalSubsc=function(n){if(t.debugLog()&&PlexUtils.getParam("tidal"))return Boolean(parseInt(PlexUtils.getParam("tidal")));n=void 0!==n?n:"tidal";var i=!1;return e.each(t.Tidal.getAllPlans(),function(e,r){if(i=t.findActiveSubscriptionType(n,r),i||(i=t.findSubscriptionType(n,r,"pending_downgrade")),i)return!1}),Boolean(i)},t.hasExpiredTrial=function(e){var n=t.getAuthInfo();if(n){var i=n.trials||!1;if(!i||!i.length||i.indexOf(e)<0){var r=n.pastSubscriptions||!1;if(r.length){for(var o=0;o<r.length;o++)if("undefined"!==r[o].type&&r[o].type===e){i.push(e);break}}else i=[]}return t.debugLog()&&PlexUtils.getParam("simulTrialEnd")&&i.push(PlexUtils.getParam("simulTrialEnd")),i.indexOf(e)>=0}return!1},t.hasLinkedProvider=function(e,n){return n=n||"linked",!1!==t.getLinkedProviderData(e,n)},t.loadPlans=function(i,r){var o=e.Deferred(),a={"X-Plex-Product":"Plex SSO","X-Plex-Client-Identifier":t.getClientIdentifier()},s={};r=void 0!==r&&r,"regular"!==i&&(s.feature=i),t.isSignedIn()&&(a["X-Plex-Token"]=t.getAuthToken());var l=PlexUtils.getAPIUrl()+"/api/v2/subscriptions/plans.json?all=true";return r&&"country"!==t.getPlansFeatureIndex(i)&&"pass"===i&&(l=PlexUtils.getAPIUrl()+"/api/subscriptions/plans.json"),e.ajax({
dataType:"json",type:"GET",headers:a,url:l,crossDomain:!0,data:s}).done(function(a){if(n[i]=a,r){var s="";if("pass"!==i&&"regular"!==i){var l=n[i].pricingModel||"countryBased";if("currencyBased"===l){var c=t.debugLog()&&PlexUtils.getParam("currency_code")?PlexUtils.getParam("currency_code"):n[i].defaultCurrency,u=c;s=c}else var d=t.debugLog()&&PlexUtils.getParam("country_code")?PlexUtils.getParam("country_code"):n[i].defaultCountry,u=d;if(g=n[i].prices[u],void 0!==n[i].prices[u]){"countryBased"===l&&(s=g.meta.currency);var g=n[i].prices[u],p=n[i].formattedPrices[u],f=[];e.each(Object.keys(g),function(e,t){if("meta"!==t){if("legacy"===t)return;f.push({id:t,name:"Monthly",price:g[t],currency:s,formattedPrice:p[t]})}}),n[i]=f}else n[i]="not_available"}PlexUtils.setCache("pricesData"+i,n[i],30)}o.resolve(a)}).then(null,function(e){o.reject(e)}),o.promise()},t.loadPrices=function(i,r){var o=e.Deferred();return r=r||!1,r||void 0!==n[i]&&null!==n[i]||(n[i]=PlexUtils.getCache("pricesData"+i)),r||null===n[i]&&"not_available"!==n[i]?t.loadPlans(i,!0):o.resolve(n)},t.maybeLoadPrices=function(i){i=i||!1;var r=function(t){e.event.trigger("pricesInit",[t]);const i={feature:t,data:n[t]||{}};var r=new CustomEvent("pricingPricesInit",{detail:i});document.dispatchEvent(r)};if(e(".pp-price-feature[data-pp-price-feature]").length){e(".plans-na-error").hide(),u();var o=[];e(".pp-price-feature[data-pp-price-feature]").each(function(){var t=e(this).data("pp-price-feature");-1===o.indexOf(t)&&o.push(t)});var a=0;e.each(o,function(n,s){t.loadPrices(s,i).then(function(){++a>=o.length&&r(s)}).fail(function(){e(".plans-na-error").show()})})}else r()},t.fillPrices=function(e){e=e||!1;try{var n=plex_l10n.active_exps.indexOf("Alt_Pricing")>=0&&!e;if(t.debugLog()&&console.log('Pricing exp: Applicable for feature "Alt_Pricing"? '+(n?"YES":"NO")),n)var i=0,r=setInterval(function(){if(i++>30||!t.expHelper.featureIsApplicableToExperiment("Alt_Pricing"))return t._loadDefaultPrices(),void clearInterval(r);if(!t.expHelper.ready)return void(t.debugLog()&&console.log('Pricing exp: Delaying "fillPrices". Retries: '+i));t.debugLog()&&console.log('Pricing exp: Running "fillPrices"');var e=new CustomEvent("altPricingLoad");document.dispatchEvent(e),clearInterval(r)},100)}catch(e){t._loadDefaultPrices()}n||t._loadDefaultPrices()},t._loadDefaultPrices=function(){t._fillPrices(),"undefined"!=typeof Transifex&&void 0!==Transifex.live&&void 0!==Transifex.live.getSelectedLanguageCode&&"en_US"!==Transifex.live.getSelectedLanguageCode()&&Transifex.live.onAfterTranslate(function(){t.debugLog()&&console.log("Pricing: Loaded localized page default pricing"),t._fillPrices()}),t.debugLog()&&console.log("Pricing: Loaded default pricing")},t._fillPrices=function(i){var r={},o=void 0!==i&&i&&Object.keys(i).length;if(o&&(r=Object.assign({},n,i)),"object"==typeof r&&Object.keys(r).length||(r=n),e.each(r,function(n,i){return"not_available"===i||(null===r[n]&&c<3?(c++,t.debugLog()&&console.log('Warning! Pricing data for "'+n+'" is null. Loading prices again (tries: '+c+")."),void t.maybeLoadPrices()):void e.each(r[n],function(t,i){var o=(void 0!==n&&"pass"!==n?n+"-":"")+i.id,a=i.formattedPrice,s=i.name;if("yearly"===i.id&&"Yearly"===i.name&&(s="Annual"),e(".plex-price-"+o+".regular-price").html(a),e(".plex-price-"+o+".name").html(s),e(".plex-price-"+o+".price.discounted-price").html(a.replace(i.currency,"").trim()),e(".plex-price-"+o+".currencycode").html(i.currency),"tidal"===n){var l=e(".tidal-promo-"+i.id).data("promo-currencies")||!1;l&&(l=l.split(","),l.indexOf(i.currency)<0&&(e(".tidal-promo-"+i.id).hide(),e(".tidal-promo-na-"+i.id).show()))}e(document).trigger("pricingUpdate",[n,i,r[n],".plex-price-"+o])}))}),t.debugLog()&&console.log("Pricing: Filled pricing data with",o?"NEW":"DEFAULT","pricing data."),!o){var a=new CustomEvent("pricingLoaded",{detail:r});document.dispatchEvent(a)}},t.clearCachedPricing=function(i){var r=function(e){t.debugLog()&&console.log("Resetting prices for: "+e),PlexUtils.clearSessionCache("pricesData"+e),n[e]=null};if(void 0!==i)return void r(i);e.each(s,function(e,t){r(t)})},t.getPlansFeatureIndex=function(e){return void 0===l[e]?l.regular:l[e]},t.getUSDPlansIndex=function(e){return"country"===e?"US":"USD"},t.canPurchasePlans=function(e){var t=PlexUtils.getCache("pricesData"+e);return null===t?void 0===n[e]||"not_available"!==n[e]:"not_available"!==t},t.getOtherActiveSubscPlan=function(){if(t.debugLog()&&PlexUtils.getParam("tidalsubsc"))return Boolean(parseInt(PlexUtils.getParam("tidalsubsc")));var n=PlexUser.getSubscriptionsInfo();if(void 0===n||!n.length)return!1;var i=!1;return e.each(plex_l10n.plans.tidal,function(e,n){if(t.findActiveSubscriptionType("tidal",n.id))return i=n,!1}),i},t.checkPendingSubscription=function(n){var i=e.Deferred();if("tidal"===n)return i.resolve();var r=t.findPendingSubscriptionType(n);return null!==r?t.getSubscriptionStatus(r.id):i.resolve()},t.findSubscriptionType=function(t,n,i){var r=PlexUser.getSubscriptionsInfo(),o=null;return t=void 0!==t?t:"",n=void 0!==n?n:"any",i=void 0!==i?i:"active",e.each(r,function(e,r){return void 0!==r.type&&(!t||r.type===t&&("any"!==i&&r.state===i||"any"===i)?("any"!==n&&n!==r.mode||(o=r),!1):void 0)}),o},t.findActiveSubscriptionType=function(e,n){return t.findSubscriptionType(e,n,"active")},t.findPendingSubscriptionType=function(e,n){return t.findSubscriptionType(e,n,"pending")},t.getActiveSubscriptionType=function(e,n){var i=t.findActiveSubscriptionType(e)||!1;return i&&void 0!==i[n]?i[n]:i},t.getLinkedProviderData=function(n,i){if(i=i||"linked",t.debugLog()&&PlexUtils.getParam("simulLinkedProvider"))return PlexUtils.getParam("simulLinkedProvider");if("linked"!==i&&t.getActiveSubscriptionType(n,"mode"))return!1;var r=t.getAuthInfo();if(r){var o=r.providers;void 0===o&&(o=[]),t.debugLog()&&PlexUtils.getParam("simulLinkedProvider")&&o.push(PlexUtils.getParam("simulLinkedProvider"));var a=e.grep(o,function(e,t){return e.id===n});if(a.length){if("linked"===i)return a[0];if(void 0!==a[0][i]&&a[0][i])return a[0][i]}}return!1},t.subscriptionGuard=function(){if(!t.isSignedIn())return t.signInRedirect(),!1;var e=t.getAuthInfo();return!e||!e.subscription.active},t.getSubscriptionStatus=function(n){var i=e.Deferred();return e.ajax({dataType:"json",type:"GET",headers:{"X-Plex-Client-Identifier":t.getClientIdentifier(),"X-Plex-Token":t.getAuthToken()},url:PlexUtils.getAPIUrl()+"/api/v2/subscriptions/"+n,crossDomain:!0,xhrFields:{withCredentials:!0}}).always(function(e,t){var n=!1;"error"!==t&&void 0!==e.state&&(n=e),i.resolve(n)}),i.promise()},t.getSubscriptionAuthInfo=function(){var e=t.getAuthInfo();return{active:e.subscription.active,plan:e.subscription.plan,billing_cycle:e.subscription.plan,next_charge_time:""}},t.SSOSyncCookie=function(n){var i=PlexUtils.getCookieDomain(),r=e(location).attr("hostname");if(!a){var o={host:r,signedIn:t.isSignedIn(),token:t.getAuthToken()};o=JSON.stringify(o);try{o=btoa(o)}catch(e){}Cookies.set("_plex_tv_auth_sync",o,{domain:i,sameSite:"Strict"})}},t.SSOSync=function(){var n=PlexUtils.getCookieDomain(),i=e(location).attr("hostname"),r=Cookies.get("_plex_tv_auth_sync");if(void 0!==r&&r){try{r=JSON.parse(atob(r))}catch(e){r=JSON.parse(r)}if(void 0!==r.host&&void 0!==r.signedIn){var o=void 0!==r.token&&t.getAuthToken()!==r.token;i===r.host||t.isSignedIn()===r.signedIn&&!o||(Cookies.remove("_plex_tv_auth_sync",{domain:n}),Cookies.remove("plex_tv_auth_rem",{domain:n}),t.isSignedIn()!==r.signedIn&&t.removeAuthInfo(),PlexSignIn.loadSSO(),a=!0)}}},t}():console.log("Plex is already defined."),e(document).ready(function(){var t=0;PlexMetrics.pushEvent("SitePlexInit"),PlexUtils.saveForward(),PlexMetrics.loadUTMParams(),PlexMetrics.execAllMetricEvents(),PlexMetrics.pushEvent("SitePlexAfterInit"),PlexSignIn.signInSSO();var n=0;PlexView.addAfterRenderHook(function(){Plex.maybeLoadPrices(n>1),Plex.SSOSync(),Plex.checkTokenExpiration(),PlexUser.refreshAuthInfo(),n++}),e(document).on("pricesInit",function(e,n){var i={};"tidal"===n&&(i={canPurchaseTidalPlans:Plex.canPurchasePlans("tidal"),canPurchaseTidalBundles:PlexUser.canPurchaseTidalBundles()}),PlexView.renderAsync(i,t++,Plex.fillPrices);try{PlexSite.captiveMaybeDisableNav()}catch(e){}})})}(jQuery,window);var PlexVueInstance={},store=!1,getPlexCoreData=function(){return{isSigninOut:!1,isNewUser:window.PlexNewUser||!1,isSigninIn:Plex.isSigninIn(),isSignedIn:Plex.isSignedIn(),refreshInfo:Plex.isRefreshingInfo(),hasAdminPermissions:PlexUser.hasAdminPermissions(),apiURL:PlexUtils.getAPIUrl(),webURL:PlexUtils.getWebUrl(),appStoreURL:PlexUtils.getApplicableAppStoreURL(),musicURL:PlexUtils.getMusicUrl(),adminURL:PlexUtils.getAdminUrl(),otherServicesURL:PlexUtils.getOtherServicesUrl(),servicesParsecURL:PlexUtils.getOtherServicesUrl("parsec"),watchlistURL:PlexUtils.getWebAppWatchlistURL(),user:Plex.getAuthInfo(),hasAccessToMusic:PlexFlags.hasAccessToFeature("music"),hasActivePlexPass:Plex.hasActivePlexPass(),remainingPlexPassDays:Plex.remainingPlexPassDays(),hasActiveMusicPass:Plex.hasActiveMusicPass(),getActiveTidalPlan:Plex.getActiveSubscriptionType("tidal","mode"),hasActiveTidalSubsc:Plex.hasActiveTidalSubsc(),hasExpiredTidalTrial:Plex.hasExpiredTrial("tidal"),hasExpiredArcadeTrial:Plex.hasExpiredTrial("arcade"),hasAnyStateTidalSubsc:PlexUser.hasAnyStateSubscription("tidal"),hasAnyStateArcadeSubsc:PlexUser.hasAnyStateSubscription("arcade"),hasLinkedTidalProvider:Plex.hasLinkedProvider("tidal","subscriptionType"),getLinkedTidalPlan:Plex.getLinkedProviderData("tidal","subscriptionType"),hasTidalPremiumBundle:PlexUser.hasSubscription("premium_bundle"),otherActiveSubscPlan:Plex.getOtherActiveSubscPlan(),canPurchaseTidalPlans:Plex.canPurchasePlans("tidal"),canPurchaseTidalBundles:PlexUser.canPurchaseTidalBundles(),isProviderTransfer:PlexUtils.getParam("transfer"),discoverTogetherInviter:PlexUser.hasRole("discover_together_introducer"),discoverTogetherInvited:PlexUser.hasRole("discover_together_user"),discoverTogetherJoined:PlexUser.hasRole("discover_together_introducer")||PlexUser.hasRole("discover_together_user"),options:{become:"1"===PlexUtils.getCache("become")}}},storeData=function(e){return e.state},PlexTemplateBase=function(e){this.el=e,this.data=function(){},this.dataHandler=[],this.store=store,this.watch={isSigninOut:function(e){this.isLoading=e},isSignedIn:function(e){var t=this;this.refresh=!0;var n=function(){t.isLoading=!1,t.isSigninOut=!1};!1===e?(this.isLoading=!0,setTimeout(n,200)):n()},isError:function(e){this.errorVisibility=e?"block":"none"},isLoading:function(e){this.loadingVisibility=e?"block":"none"}},this.updated=function(){this.show=!0,this.foundation&&jQuery(this.foundation).foundation()},this.methods={loadFeatureFlags:function(e){return PlexFlags.refreshFeaturesTree(!0)},setSigninOut:function(){this.isSigninOut=!0},hideElementsAfterLoad:function(e,t){if(e&&t)try{const n=document.querySelectorAll(e);n.length&&(n[0].closest(t).style.display="none")}catch(e){}}},this.computed={getSignInState:function(){return this.$store.state.isSignedIn}},this.mounted=function(){},this.beforeMount=function(){var e=this;this.featureFlags&&this.loadFeatureFlags().then(function(){e.loadedFeatureFlags=!0})}},PlexTemplating={el:".plex-templating",customDirectives:["foundation","featureFlags"],$loader:null,templates:{},extend:{},hooks:{},updatedCallbacks:[],simulSignedIn:function(e){if(!Plex.debugLog)return!1;e=e||{},e=jQuery.extend(!0,{isSignedIn:!0},e),store.commit("simulState",e)},simulSignedOut:function(e){if(!Plex.debugLog)return!1;e=e||{},e=jQuery.extend(!0,{isSignedIn:!1},e),store.commit("simulState",e)},simulState:function(e){if(!Plex.debugLog)return!1;store.commit("simulState",e)},helperData:function(){return{show:!1,refresh:!1,isLoaded:!1,isLoading:!1,loadingVisibility:"none",isError:!1,errorVisibility:"none",foundation:!1,featureFlags:!1,loadedFeatureFlags:!1}},coreData:{},init:function(){var e=this,t=!1;store=new Vuex.Store({state:getPlexCoreData(),mutations:{simulState:function(n,i){n=jQuery.extend(!0,n,i),t=!0,e.userStateChanged(),t=!1},refresh:function(e){t||(e=Object.assign(e,getPlexCoreData()))}}}),this._init(store)},_init:function(e){var t=this;t.coreData=function(){return storeData(e)},jQuery.each(jQuery(this.el),function(e,n){var i=jQuery(n).attr("id"),r=jQuery(n).data("template"),o=jQuery(n).data(),a=i;r&&void 0!==t.extend[r]&&(a=r),t.templates[i]=new PlexTemplateBase("#"+i),jQuery.each(o,function(e,n){t.customDirectives.indexOf(e)>=0&&(void 0===t.templates[i].dataAtts&&(t.templates[i].dataAtts={}),n||(n=!0),t.templates[i].dataAtts[e]=n)}),void 0!==t.extend[a]&&(t.templates[i]=jQuery.extend(!0,t.templates[i],t.extend[a]))}),this._initVue()},_initVue:function(){var e=this;Vue.config.delimiters=["<%","%>"],Vue.config.devtools=PlexUtils.isDevelopment(),Vue.config.debug=PlexUtils.isDevelopment(),Vue.config.silent=!PlexUtils.isDevelopment(),jQuery.each(e.templates,function(t,n){e.maybeUpdateHelperData(n),e.registerDataHandler(e.helperData,t),e.registerDataHandler(e.coreData,t),n.data=e._getData(t),PlexVueInstance[t]=new Vue(n)})},maybeUpdateHelperData:function(e){if(void 0!==e.dataAtts){var t=this.helperData();jQuery.each(e.dataAtts,function(e,n){t[e]=n});var n=function(){return t};this.helperData=Object.assign(this.helperData,n)}},registerDataHandler:function(e,t){-1===this.templates[t].dataHandler.indexOf(e)&&this.templates[t].dataHandler.push(e)},_getData:function(e){var t=void 0!==this.templates[e].data?this.templates[e].data():{};return this.templates[e].dataHandler.map(function(e){t=jQuery.extend(!0,t,e())}),function(){return t}},_registerEvent:function(e,t){e=e.replace("addAfter",""),e=e.charAt(0).toLowerCase()+e.slice(1),void 0===this.hooks[e]&&(this.hooks[e]=[]),this.hooks[e].push(t)},_updateData:function(e){if(store){store.commit("refresh");var t=storeData(store);jQuery.each(PlexVueInstance,function(n,i){if("object"==typeof e){var r=Object.keys(e);jQuery.each(r,function(t,i){PlexVueInstance[n][i]=jQuery.extend(!0,PlexVueInstance[n][i],e[i])})}else jQuery.each(t,function(e,t){PlexVueInstance[n][e]=t})})}},updateData:function(e){this._updateData(e)},run:function(e){jQuery(this.el).length&&void 0!==this.hooks[e]&&this.hooks[e].map(function(e){jQuery(document).ready(function(){void 0!==e&&e&&e()})})},extendTemplate:function(e,t){this.extend[e]=t},userStateChanged:function(){this.updateData(),this.run("userStateChanged")},addAfterUserStateChanged:function(e){this._registerEvent("addAfterUserStateChanged",e)}};jQuery(document).ready(function(){PlexTemplating.init(),PlexTemplating.userStateChanged()}),function(e,t){"undefined"==typeof PlexView?t.PlexView=function(){var t={},n={},i={},r=[],o=[],a=[],s={},l={},c=!1,u=!1,d=!0;return"undefined"==typeof Handlebars&&console.error("The Handlebars JS library is missing! Please make sure you'r browser is not blocking javascript."),Handlebars.registerHelper({eq:function(e,t){return e===t},ne:function(e,t){return e!==t},lt:function(e,t){return e<t},gt:function(e,t){return e>t},lte:function(e,t){return e<=t},gte:function(e,t){return e>=t},and:function(e,t){return e&&t},or:function(e,t){return e||t},not:function(e){return!e}}),Handlebars.registerHelper("iftrue",function(e,t,n){return e?t:n}),Handlebars.registerHelper("feature",function(e){return PlexUser.hasFeature(e)}),Handlebars.registerHelper("img",function(e){return"<img "+Object.keys(e.hash).map(function(t){return t+'="'+e.hash[t]+'"'}).join(" ")+"/>"}),t.init=function(e){t.loadViews(),t.initBeforeRenderHooks(),t.initAfterRenderHooks(),t.execHooks("once"),t.render(),void 0!==e&&e()},t.initBeforeRenderHooks=function(){o.push(function(){PlexUtils.isDevelopment()&&n.hasOwnProperty("navbar-staging")?(s.stagingUrls=PlexUtils.getStagingUrls(),s.currentStagingUrl=PlexUtils.getCurrentStagingAPIUrl()):delete n["navbar-staging"],s.become="1"===PlexUtils.getCache("become")})},t.initAfterRenderHooks=function(){a.push(function(){e(document).ready(function(){PlexUtils.isDevelopment()&&n.hasOwnProperty("navbar-staging")&&e("#plex-dd-stagingurl").change(function(t){var n=e(t.currentTarget).val();PlexUtils.setCurrentStagingAPIUrl(n),location.reload()})})})},t.addRenderOnceHook=function(t){r.push(function(){e(document).ready(function(){t()})}),c&&t()},t.addAfterRenderHook=function(t){a.push(function(){e(document).ready(function(){t()})}),c&&t()},t.execHooks=function(e){var t=[];"after"===e?t=a:"before"===e?t=o:"once"===e&&(t=r),t.map(function(e){e()})},t.loadViews=function(t){t=void 0!==t?t:".plexview-template";var r=e(t),o=null,a=null,s=null,l=null,c=null,u=e("<div/>");u.addClass("view-loading").css({display:"none"}),e.each(r,function(t,r){o=e(r),s=o.html(),c=o.data("view"),l=Handlebars.compile(s),n[c]=l,a=u.clone().attr("data-parent",c),e(".plexview-"+c).hasClass("async-load")&&(i[c]=l),e(".plexview-"+c).hide(),e(".dynamic-loading.plexview-"+c).after(a),o.remove()})},t.render=function(i){var r=e("<div/>");i=void 0!==i&&i,r.addClass("view-loading"),i||t.execHooks("before"),l={isSignedIn:Plex.isSignedIn(),isSigninIn:Plex.isSigninIn(),refreshInfo:Plex.isRefreshingInfo(),hasAdminPermissions:PlexUser.hasAdminPermissions(),apiURL:PlexUtils.getAPIUrl(),webURL:PlexUtils.getWebUrl(),musicURL:PlexUtils.getMusicUrl(),adminURL:PlexUtils.getAdminUrl(),otherServicesURL:PlexUtils.getOtherServicesUrl(),servicesParsecURL:PlexUtils.getOtherServicesUrl("parsec"),watchlistURL:PlexUtils.getWebAppWatchlistURL(),resetPasswordUrl:PlexUtils.getResetPasswordUrl(),user:Plex.getAuthInfo(),hasAccessToMusic:PlexFlags.hasAccessToFeature("music"),hasActivePlexPass:Plex.hasActivePlexPass(),remainingPlexPassDays:Plex.remainingPlexPassDays(),hasActiveMusicPass:Plex.hasActiveMusicPass(),getActiveTidalPlan:Plex.getActiveSubscriptionType("tidal","mode"),hasActiveTidalSubsc:Plex.hasActiveTidalSubsc(),hasExpiredTidalTrial:Plex.hasExpiredTrial("tidal"),hasExpiredArcadeTrial:Plex.hasExpiredTrial("arcade"),hasAnyStateTidalSubsc:PlexUser.hasAnyStateSubscription("tidal"),hasAnyStateArcadeSubsc:PlexUser.hasAnyStateSubscription("arcade"),hasLinkedTidalProvider:Plex.hasLinkedProvider("tidal","subscriptionType"),getLinkedTidalPlan:Plex.getLinkedProviderData("tidal","subscriptionType"),hasTidalPremiumBundle:PlexUser.hasSubscription("premium_bundle"),otherActiveSubscPlan:Plex.getOtherActiveSubscPlan(),canPurchaseTidalPlans:Plex.canPurchasePlans("tidal"),canPurchaseTidalBundles:PlexUser.canPurchaseTidalBundles(),isProviderTransfer:PlexUtils.getParam("transfer"),discoverTogetherInviter:PlexUser.hasRole("discover_together_introducer"),discoverTogetherInvited:PlexUser.hasRole("discover_together_user"),discoverTogetherJoined:PlexUser.hasRole("discover_together_introducer")||PlexUser.hasRole("discover_together_user"),options:s},e.each(n,function(n,r){var o=!1;try{e(".plexview-"+n).html(r(l)),e(".view-loading[data-parent="+n+"]").hide(),i?(t.loading(n),e(".view-loading[data-parent="+n+"]").hide(200,function(){e(".dynamic-loading.plexview-"+n).fadeIn("slow")})):e(".plexview-"+n).hasClass("async-load")?o=!0:e(".plexview-"+n).fadeIn(),!o&&e(".plexview-"+n).hasClass("foundation-reinit")&&e(document).foundation()}catch(e){console.error("Error compiling "+n+" template."),console.error(e);var a=e.message.replace(/[\u00A0-\u9999<>\&]/gim,function(e){return"&#"+e.charCodeAt(0)+";"});document.write("<pre>"+a+"</pre>")}}),i||t.execHooks("after"),c=!0},t.renderAsync=function(t,n,r){e.extend(l,t),e.each(i,function(t,i){var r=e(".plexview-"+t);try{r.html(i(l)),n?r.show():r.delay(500).fadeIn(),r.hasClass("foundation-reinit")&&e(document).foundation()}catch(e){console.error("Error compiling "+t+" template."),console.error(e);var o=e.message.replace(/[\u00A0-\u9999<>\&]/gim,function(e){return"&#"+e.charCodeAt(0)+";"});return void document.write("<pre>"+o+"</pre>")}}),void 0!==r&&r()},t.loading=function(i){if(void 0!==i)return void t._loading(i);e.each(n,function(e,n){t._loading(e)})},t._loading=function(t){try{e(".dynamic-loading.plexview-"+t).hide(),e(".view-loading[data-parent="+t+"]").show(),e("[data-parent="+t+"]").fadeIn()}catch(e){console.error("Error compiling "+t+" template."),console.error(e);var n=e.message.replace(/[\u00A0-\u9999<>\&]/gim,function(e){return"&#"+e.charCodeAt(0)+";"});document.write("<pre>"+n+"</pre>")}},t.cancelLoading=function(t){var n=e(".view-loading:visible");n.length&&setTimeout(function(){e(".view-loading").hide(),n.each(function(t,n){var i=e(n).data("parent");e(".plexview-"+i).fadeIn()})},1e3)},t.setRunHooks=function(e){u=e},t.runViewHooks=function(){return u},t.setRefreshView=function(e){d=e},t.refreshView=function(){return d},t.refresh=function(){var e=!t.runViewHooks();t.render(e)},t}():console.log("PlexView is already defined."),e(document).ready(function(){}),e(t).on("beforeunload",function(e){PlexView.cancelLoading()})}(jQuery,window),function(e,t){"undefined"==typeof PlexUser?t.PlexUser=function(){var t={};return t.hasRole=function(e){if(!Plex.isSignedIn())return!1;var t=Plex.getAuthInfo();if(void 0===t||void 0===t.roles)return!1;var n=[];return Array.isArray(t.roles)?n=t.roles:Array.isArray(t.roles.roles)&&(n=t.roles.roles),-1!==n.indexOf(e)},t.hasFeature=function(e){return!!Plex.isSignedIn()&&-1!==Plex.getAuthInfo().subscription.features.indexOf(e)},t.hasAdminPermissions=function(){if(!Plex.isSignedIn())return!1;if(void 0===Plex.getAuthInfo().roles)return!1;var e=[],t=["admin","app_manager","user_admin","marketing_admin","employee"];return Array.isArray(Plex.getAuthInfo().roles)?e=Plex.getAuthInfo().roles:Array.isArray(Plex.getAuthInfo().roles.roles)&&(e=Plex.getAuthInfo().roles.roles),e.reduce(function(e,n){return e||t.reduce(function(e,t){return e||t==n},!1)},!1)},t.getUser=function(t,n){t=t||{},n=n||Plex.getAuthToken();var i={"X-Plex-Product":"Plex SSO","X-Plex-Client-Identifier":Plex.getClientIdentifier(),"X-Plex-Token":n};return e.ajax({dataType:"json",type:"GET",headers:i,url:PlexUtils.getAPIUrl()+"/api/v2/user",data:t,crossDomain:!0})},t.getTransientToken=function(){var e=!1;if(PlexUtils.getParam("token")&&0===PlexUtils.getParam("token").indexOf("transient-"))e=PlexUtils.getParam("token");else try{e=sessionStorage.getItem("_PlexAVM_token")}catch(e){}if(e){var t=PlexUtils.sanitizeString(e);if(t)return t}return!1},t.refreshAuthInfo=function(t,n){if(Plex.isSignedIn()){if(n=void 0!==n&&n,Plex.isRefreshingInfo()){var i=PlexUtils.getPageForURL();if(i&&Plex.getSignInPage().indexOf(i)>=0&&!PlexUtils.isReturningWebApp()&&!PlexUtils.getAPIUrl())return;t=!0}var r=Plex.getAuthInfo();if(moment.unix(r.lstorage_at).add(2,"minute").unix()<moment().unix()||t){PlexView.setRefreshView(!1),t&&PlexView.setRunHooks(!1);var o=PlexUtils.getParam("become"),a=PlexUtils.getParam("unbecome");if("1"===o)return PlexUtils.setCache("become","1",600),r;if("1"===a)return PlexUtils.setCache("become",0,1),r;var s={"X-Plex-Product":"Plex SSO","X-Plex-Client-Identifier":Plex.getClientIdentifier(),"X-Plex-Token":Plex.getAuthToken()};e.ajax({dataType:"json",type:"GET",headers:s,url:PlexUtils.getAPIUrl()+"/api/v2/user",data:{includeSubscriptions:!0,includeProviders:!0},crossDomain:!0,success:function(e){var i=void 0!==e.rememberExpiresAt&&e.rememberExpiresAt;Plex.debugLog()&&console.log(e),i||n?Plex.setAuthInfo(e,i):(Plex.removeAuthInfo(),t||Plex.signInRedirect())},error:function(e){401!=e.status&&422!=e.status||(Plex.removeAuthInfo(),t||Plex.signInRedirect())}})}}},t.getActivePayment=function(){var t=e.Deferred(),n={"X-Plex-Product":"Plex SSO","X-Plex-Client-Identifier":Plex.getClientIdentifier()};return Plex.isSignedIn()&&(n["X-Plex-Token"]=Plex.getAuthToken()),e.ajax({dataType:"json",type:"GET",headers:n,url:PlexUtils.getAPIUrl()+"/api/v2/user/payment_method",crossDomain:!0}).done(function(e){t.resolve(e)}).fail(null,function(e){t.resolve(!1)}),t.promise()},t.getSubscriptions=function(){var n=e.Deferred(),i={"X-Plex-Product":"Plex SSO","X-Plex-Client-Identifier":Plex.getClientIdentifier()};return Plex.isSignedIn()&&(i["X-Plex-Token"]=Plex.getAuthToken()),e.ajax({dataType:"json",type:"GET",headers:i,url:PlexUtils.getAPIUrl()+"/api/v2/user/subscriptions",crossDomain:!0}).done(function(e){t.cacheSubscriptions(e),n.resolve(e)}).then(null,function(e){n.reject(e)}),n.promise()},t.getSubscriptionsInfo=function(){try{var e=localStorage.getItem("plex_tv_subsc");if(e)return JSON.parse(e)}catch(e){console.warn("Your browser doesn't support local storage.")}},t.getDevices=function(){var t=e.Deferred();if(!Plex.isSignedIn())return t.reject();var n=!1;try{n=sessionStorage.getItem("plex_devices"),n&&(n=JSON.parse(n))}catch(e){}if(n&&Array.isArray(n)&&n.length)return t.resolve(n);var i={"X-Plex-Product":"Plex SSO","X-Plex-Client-Identifier":Plex.getClientIdentifier(),"X-Plex-Token":Plex.getAuthToken()};return e.ajax({dataType:"json",type:"GET",headers:i,url:PlexUtils.getAPIUrl()+"/api/v2/devices"}).done(function(e){n=[],e.forEach(function(e){n.indexOf(e.product)<0&&n.push(e.product)}),sessionStorage.setItem("plex_devices",JSON.stringify(n)),t.resolve(n)}).then(null,function(e){t.reject(e)}),t.promise()},t.getCountryCode=function(){var e=Plex.getAuthInfo();return!!e&&e.country},t.hasAnyStateSubscription=function(e){return null!==Plex.findSubscriptionType(e,"any","any")},t.hasSubscription=function(n){var i=t.getSubscriptionsInfo();if(void 0===i)return!1;var r=e.grep(i,function(e,t){return e.mode===n});return r&&r.length>0},t.canPurchaseTidalBundles=function(e){if(!Plex.canPurchasePlans("tidal"))return!1;e=e||!1;var t=PlexUtils.getCache("pricesDatatidal");return!t&&!e||!!(e||Object.keys(t).length&&"undefined"!==t[0].currency)&&(e||(e=t[0].currency),Plex.debugLog()&&PlexUtils.getParam("tidal_bundle_currency")&&(e=PlexUtils.getParam("tidal_bundle_currency")),Plex.Tidal.isValidBundleCurrency(e))},t.cacheSubscriptions=function(e){try{void 0!==e&&localStorage.setItem("plex_tv_subsc",JSON.stringify(e))}catch(e){console.warn("Your browser doesn't support local storage.")}},t.clearSubscriptions=function(){try{localStorage.removeItem("plex_tv_subsc")}catch(e){console.warn("Your browser doesn't support local storage.")}},t}():console.log("PlexUser is already defined."),e(document).ready(function(){})}(jQuery,window),function(e,t){t.onerror=function(n,i,r,o,a){if(plex_l10n.js_error_log){var s={error:a,source:i,lineno:r,page_id:plex_l10n.post_id,location:t.location.href},l={"X-WP-Nonce":plex_l10n.errors.nonce};e.ajax({type:"POST",url:plex_l10n.errors.endpoint,data:s,headers:l,success:function(){console.error("Error detected. We were informed.")}},"json")}},PlexConditionizr.init(),"undefined"==typeof PlexSite&&(t.PlexSite=function(){var n=plex_l10n.enable_sentry&&"undefined"!=typeof Sentry;n&&Sentry.onLoad(function(){Sentry.init({environment:PlexUtils.isDevelopment()?"development":"production",release:plex_l10n.app_version})});var i={logErrorMessage:function(e,t){n?(t&&Sentry.addBreadcrumb(t),Sentry.captureMessage(e)):console.error(e)},logException:function(e,t){n?(t&&Sentry.addBreadcrumb(t),Sentry.captureException(e)):console.error(e)},init:function(){i.featureFlagRedirects(),o.init(),i.wrapDropdowns(),i.statsRollIn(),i.higlightSubMenuItems(),i.smoothScrollBind(),i.captiveMaybeDisableNav(),a.init(),e.event.trigger({type:"plex_site_init"}),PlexMetrics.pushEvent("SiteInit"),i.SVGtoInline()},SVGtoInline:function(){e("img.svg").each(function(){var t=e(this),n=t.attr("id"),i=t.attr("class"),r=t.attr("src");e.get(r,function(r){var o=e(r).find("svg");void 0!==n&&(o=o.attr("id",n)),void 0!==i&&(o=o.attr("class",i+" replaced-svg")),o=o.removeAttr("xmlns:a"),!o.attr("viewBox")&&o.attr("height")&&o.attr("width")&&o.attr("viewBox","0 0 "+o.attr("height")+" "+o.attr("width")),t.replaceWith(o)},"xml")})},wrapDropdowns:function(){e(".sidebar [class*=widget_] select:not( [name=cat],.select-custom )").wrap('<div class="select-container"></div>'),e(".sidebar [class*=widget_] select[name=cat]").parent("form").addClass("select-container"),e(".ginput_card_expiration").wrap('<div class="select-container"></div>')},statsRollIn:function(){e(".count").each(function(){e(this).attr("Counter",0).animate({Counter:e(this).text()},{duration:1e3,easing:"swing",step:function(t){e(this).text(Math.ceil(t))}})})},captiveSet:function(){PlexUtils.getParam("captive")&&sessionStorage.setItem("plex_is_captive",1)},captiveCheck:function(){PlexUtils.getParam("captive")&&i.captiveSet();try{return sessionStorage.getItem("plex_is_captive")}catch(e){}return!1},captiveMaybeDisableNav:function(){if(i.captiveCheck())try{if(void 0!==document.querySelectorAll("#plex-global-nav .navbar")[0]&&document.querySelectorAll("#plex-global-nav .navbar")[0].classList.add("captive"),void 0!==document.querySelectorAll(".foot-container")[0]&&document.querySelectorAll(".foot-container")[0].classList.add("captive"),void 0!==document.querySelectorAll(".menu-sub-footer-container")[0]&&document.querySelectorAll(".menu-sub-footer-container")[0].classList.add("captive"),void 0!==document.querySelectorAll("#plex-language-bar")[0]&&document.querySelectorAll("#plex-language-bar")[0].classList.add("captive"),void 0!==document.querySelectorAll(".menu-social")[0]&&document.querySelectorAll(".menu-social")[0].classList.add("captive"),void 0!==document.querySelectorAll('a[href^=http], a[href="#"]')[0])for(var e=document.querySelectorAll('a[href^=http], a[href="#"]'),t=0;t<e.length;t++)void 0!==e[t].closest("#tip-languages")&&e[t].closest("#tip-languages")||void 0!==e[t].closest(".cookie-consent")&&e[t].closest(".cookie-consent")||e[t].removeAttribute("href");if(void 0!==document.querySelectorAll(".button")[0])for(var e=document.querySelectorAll(".button"),t=0;t<e.length;t++)void 0!==e[t].closest(".remodal-cookie-settings")&&e[t].closest(".remodal-cookie-settings")||void 0!==e[t].closest(".cookie-consent")&&e[t].closest(".cookie-consent")||e[t].remove()}catch(e){}},higlightSubMenuItems:function(){e(".dynamic-submenu-item-highlight[data-bucket]").each(function(t,n){parseInt(plex_l10n.post_id)!==parseInt(e(n).data("bucket"))&&parseInt(plex_l10n.post_parent)!==parseInt(e(n).data("bucket"))||e(this).addClass("current-menu-item")})},displayPopUps:function(){parseInt(plex_l10n.is_page)},featureFlagRedirects:function(){PlexFlags.skipFeatureFlags()||void 0!==plex_l10n.feature_flags_actions.redirects&&e.each(plex_l10n.feature_flags_actions.redirects,function(t,n){PlexFlags.hasAccessToFeature(t)||e.each(n,function(e,t){if(parseInt(plex_l10n.post_id)===parseInt(e))return PlexUtils.redirect(t),!1})})},smoothScrollBind:function(){e.each(e('[href^="#"]:not([data-smooth-scroll]):not([tabindex])'),function(t,n){if(e(n).parent().hasClass("tabs-title"))return!0;if(1===e(n).attr("href").length)return!0;var i=e(n).attr("href");e(i).length&&e(n).attr("data-smooth-scroll",i)})},scrollToHash:function(t){var n=void 0!==t?t:location.hash,i=e("html,body,window"),r=!1;n=n.replace(/\/|\\/g,"");var o=!0;try{e(n)}catch(e){o=!1}if(o&&n&&n.length>1&&"#!"!==n.substring(0,2)&&"#?"!==n.substring(0,2)&&e(n).length){if(i.on("mousedown wheel DOMMouseScroll mousewheel keyup touchmove",function(){r=!0,i.stop()}),r)return;var a=0;try{a=e(n).height()}catch(e){}var s=e(n).offset().top-a;i.animate({scrollTop:s},700,"swing",function(){s!==e(n).offset().top-a&&i.animate({scrollTop:e(n).offset().top-a},700)})}},toggleGeoItems:function(t){if(e(".geolocation-hide").hide(),Array.isArray(t))try{t.forEach(function(t){e(".geolocation-hide").filter("."+t+"-hide").show(),e(".geolocation-display").filter("."+t+"-display").show()})}catch(e){}},toggleDynamicMenuItems:function(){if(e(".menu-item.nav-item-toggable").show(),e(".menu-item.nav-item-toggable-hide").hide(),Plex.isSignedIn()?e(".menu-item.signed_in-hide").hide():e(".menu-item.signed_out-hide").hide(),Plex.hasActivePlexPass()&&Plex.hasActiveTidalSubsc()&&e(".menu-item.bundle_users-hide").hide(),Plex.hasActivePlexPass()&&e(".menu-item.plex_pass-hide").hide(),Plex.hasActiveTidalSubsc()&&e(".menu-item.tidal_subsc-hide").hide(),Plex.isSignedIn()){var t=PlexUser.getSubscriptionsInfo();void 0!==t&&t.length||e(".menu-item.free_users-hide").hide()}
var n=["geolocation-continent-"+plex_l10n.geolocation.continent,"geolocation-country-"+plex_l10n.geolocation.country,"geolocation-region-"+plex_l10n.geolocation.region];if(e('li[class*="geolocation-region"]').length){var i=this;PlexGeo.getRegion().then(function(e){if(e)return n.push("geolocation-region-"+e.toUpperCase()),i.toggleGeoItems(n),!0})}this.toggleGeoItems(n)},displayOneTimePopUp:function(t){var n,i=e("[data-remodal-id=modal-"+t+"]"),r="plex_tv_cta_"+t;if(i.length){try{n=localStorage.getItem(r)}catch(e){n=Cookies.get(r)}if(void 0===n||null===n)try{i.remodal().open(),e(document).on("click",i.find(".icon-close"),function(){try{localStorage.setItem(r,1)}catch(e){return Cookies.set(r,1,{domain:PlexUtils.getCookieDomain()}),null}})}catch(e){}}},initGoogleOneTap:function(){function n(){var e=document.getElementById("credential_picker_container")||!1;if(!e||!Plex.isSignedIn()&&!Plex.isSigninIn())return Plex.isSignedIn()||Plex.isSigninIn();e.style.display="none"}var i=!1;try{i=sessionStorage.getItem("plex_goog_onetap_autoselect_disable")}catch(e){}var r=!i;if(document.addEventListener("plex_signout",function(){r=!1,sessionStorage.setItem("plex_goog_onetap_autoselect_disable",1)}),!Plex.isSignedIn()&&!Plex.isSigninIn()){if(document.getElementById("plex-global-nav")||!1){e(document).on("fedAuthStateChange",function(e,t){n()});var o=document.createElement("script");setTimeout(function(){o.src="https://accounts.google.com/gsi/client",document.head.append(o)},300),o.onload=function(){n()||"undefined"==typeof google||"object"!=typeof google||(google.accounts.id.initialize({client_id:plex_l10n.google_oauth_client_id,callback:t.PlexAuthGoogle.auth,auto_select:r,cancel_on_tap_outside:!0}),google.accounts.id.prompt(function(e){function i(){var e=document.getElementById("plex-global-nav").getBoundingClientRect(),t=e.height+e.top;document.documentElement.scrollTop>t?o.style.top="10px":o.style.top=t+10+"px"}function r(){t.innerWidth>1800?o.style.transform="translateX(calc((("+t.innerWidth+"px - 1800px) / 2) * -1 ))":o.style.transform="none"}if(e.isNotDisplayed()||e.isSkippedMoment());else{var o=document.getElementById("credential_picker_container")||!1;if(!o)return;o.style.zIndex=1,t.addEventListener("scroll",i,{passive:!0}),t.addEventListener("resize",r),i(),r(),n()}}))}}}}},r={optOut:!1,init:function(){!navigator.globalPrivacyControl||PlexUtils.isDevelopment()?Plex.debugLog()&&console.log('Ignoring "Global Privacy Control" state. "PlexGPC.optOut" would be: ',!!navigator.globalPrivacyControl):r.optOut=!!navigator.globalPrivacyControl}},o={isMobileConsent:!1,modalInst:!1,model:{GTMEvents:[],cookies:[]},cookies:{analytics:{key:"optin_analytics",event:"SiteAnalyticsConsentGiven"},thirdParty:{key:"optin_thirdparty",event:"SiteThirdPartyConsentGiven"}},init:function(){r.init(),t.PlexConsentEvents=[],t.PlexHasCookieConsent=function(e){return void 0!==t.PlexConsentEvents[e]},o.checkPrivacyRestrictions().always(function(e){o.approved(e)?o.runGTMEvents():e&&o.displayConsent(),o.initEvents(e),o.bulkUpdateCookieOptions(!0)})},checkPrivacyRestrictions:function(){var t=e.Deferred(),n=!1;return PlexGeo.getGeo().then(function(e){if(e){var i=void 0!==e.in_privacy_restricted_country&&e.in_privacy_restricted_country,r=void 0!==e.in_privacy_restricted_region&&e.in_privacy_restricted_region;n=i||r}void 0!==plex_l10n.privacy_restricted_regions&&void 0!==e.subdivisions&&e.subdivisions&&plex_l10n.privacy_restricted_regions.indexOf(e.subdivisions.toUpperCase())>=0&&(n=!0),t.resolve(n)}).fail(function(){t.resolve(n)}),t.promise()},displayConsent:function(){var t=e(".notification-bar.cookie-consent");PlexUtils.getDeviceWidth()<=1024?(o.isMobileConsent=!0,o.modalInst=e(".notification-bar-mobile").remodal(),o.modalInst&&o.modalInst.open()):t.show()},runGTMEvents:function(){o.model.GTMEvents.forEach(function(n){PlexMetrics.pushEvent(n),e.event.trigger({type:n});var i=new CustomEvent(n);document.dispatchEvent(i),t.PlexConsentEvents.push(n),Plex.debugLog()&&console.log(n)})},updateSelectedCookies:function(e,t){if(t=t||"add",o.cookies.analytics.key===e||o.cookies.thirdParty.key===e){var n=o.model.cookies.indexOf(e);"add"===t&&n<0?o.model.cookies.push(e):"remove"===t&&n>=0&&o.model.cookies.splice(n,1),Plex.debugLog()&&console.log(o.model.cookies)}},updateGTMEventsList:function(t){e.each(Object.keys(o.cookies),function(e,n){var i=o.cookies[n].key;i===o.cookies.thirdParty.key&&r.optOut||!o.isCookieSet(i)&&t||o.model.GTMEvents.push(o.cookies[n].event)})},save:function(t,n){var i=PlexUtils.getCookieDomain();e.each(Object.keys(o.cookies),function(e,t){var n=o.cookies[t].key;Cookies.remove("plex_tv_"+n,{domain:i})}),o.model.cookies.forEach(function(e){var t="plex_tv_"+e;Cookies.set(t,1,{expires:365,domain:i})}),o.updateGTMEventsList(n),t=void 0!==t&&t,t&&Cookies.set("plex_tv_cookie_consent",2,{expires:365,domain:i}),o.runGTMEvents()},isCookieSet:function(e){return"cookie_consent"===e?"2"==Cookies.get("plex_tv_"+e):void 0!==Cookies.get("plex_tv_"+e)},approved:function(e){return o.updateGTMEventsList(e),e?o.isCookieSet("cookie_consent"):(Plex.debugLog()&&console.log("All cookies consented"),!0)},bulkUpdateCookieOptions:function(t,n){t=t||!1,e(".remodal-cookie-settings").find(".user-option[type=checkbox]").not('[data-option="required_cookies"]').each(function(i,r){var a=e(r).data("option"),s=void 0!==n?n:o.isCookieSet(a);e(r).is(":checked")!==s&&e("."+a+".user-option").trigger("click",[t])})},updateCookieUIOptions:function(t,n){e(".remodal-cookie-settings").find(".user-option[type=checkbox]").each(function(t,n){var i=e(n).data("option"),a=o.isCookieSet(i);o.isCookieSet("cookie_consent")||(a=!0),i===o.cookies.thirdParty.key&&r.optOut&&(a=!1),e("."+i+".user-option").prop("checked",a).trigger("change")})},initEvents:function(t){e(document).on("click",".cookie-consent-accept, .cookie-consent-reject",function(t,n){var i=!!t.target.classList.contains("cookie-consent-accept");o.bulkUpdateCookieOptions(!1,i),e(".cookie-settings-save").trigger("click")}),e(document).on("click",".cookie-settings-save",function(){e(".notification-bar.cookie-consent").slideUp(),o.isMobileConsent&&o.modalInst&&o.modalInst.close(),o.save(!0,t)}),e(document).on("PlexSettingToggle",function(e,t,n,i){i||(n?o.updateSelectedCookies(t):o.updateSelectedCookies(t,"remove"))}),e(document).on("opened",'.remodal[data-remodal-id="plex-cookies-use"]',function(){o.updateCookieUIOptions()}),e(document).on("PlexSettingClick",function(t,n){var i="accept_all_cookies"===n;o.bulkUpdateCookieOptions(!1,i),e(".cookie-settings-save").trigger("click")})}},a={init:function(){(new WOW).init(),a.preInitSlick(),a.initTooltips(),a.modals()},initTooltips:function(){e(".tooltip").tooltipster({theme:"tooltipster-shadow",minWidth:300,interactive:!0}),e(".tooltip-lang").tooltipster({theme:"tooltipster-shadow",maxWidth:275,interactive:!0,trigger:"click",position:"top"}),e(".tooltip-ota").tooltipster({theme:"tooltipster-shadow",maxWidth:400,interactive:!0}),e(".tooltip-pms").tooltipster({theme:"tooltipster-shadow",maxWidth:400,interactive:!0,functionReady:function(t,n){e(document).on("click",e(n.origin),function(){e(n.origin).tooltipster("close")})}})},preInitSlick:function(){if(e(".plex-slick-carousel, .multiple-items, .hero-carousel, .press-carousel, .custom-slick").length){!function(e){function t(e){console.error("The script "+e.target.src+" didn't load correctly.")}var n=document.createElement("script");n.onerror=t,e&&(n.onload=e),document.head.appendChild(n),n.src=plex_l10n.path_to_js+"conditional/lib/slick.min.js"}(a.initSlick)}},initSlick:function(){e.event.trigger({type:"plex_slick_init"}),e(document).on("init",".slick-start-hidden",function(t,n){e(this).show()}),e(document).on("change.zf.tabs","#feature-tabs",function(t,n){e(".multiple-items.cards").slick("slickGoTo",0)}),e(t).on("scroll",function(){if(e(".multiple-items").not(".slider-playing").length&&void 0!==e.fn.slick){var n=e(".multiple-items").offset().top,i=e(t).height();e(this).scrollTop()>n-i&&e(".multiple-items").not(".slider-playing").addClass("slider-playing").slick("slickPlay")}}),e(document).on("change.zf.tabs",".tabs[data-tabs-slick], .tabs[data-tabs]",function(t,n){var i=n.find("a").attr("href"),n=e(i).find(".multiple-items");n.slick("setPosition"),n.find(".yolo").length<=4&&n.find(".slick-dots").hide()}),e(".multiple-items").slick({infinite:!0,slidesToShow:4,slidesToScroll:2,arrows:!1,dots:!0,autoplaySpeed:6e3,responsive:[{breakpoint:1441,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0,dots:!0}},{breakpoint:1025,settings:{slidesToShow:2,slidesToScroll:2,infinite:!0,dots:!0}},{breakpoint:641,settings:{slidesToShow:1,slidesToScroll:1}}]}),e(".hero-carousel").slick({autoplay:!0,pauseOnHover:!0,dots:!0,arrows:!1,infinite:!0,speed:600,autoplaySpeed:6e3,slidesToShow:1}),e(".tabs[data-tabs-slick]").length||e(".slick-list").find(".slick-slide").length<=4&&e(".slick-list").closest(".slick-slider").find(".slick-dots").hide()},modals:function(){e(document).on("closing",".remodal",function(e){null!==/\/#$/gm.exec(location.href)&&history.replaceState({},document.title,location.href.replace("#",""))})}};return i}()),e(document).ready(function(){if(PlexSite.scrollToHash(),PlexView.init(),PlexSite.init(),PlexView.addAfterRenderHook(function(){PlexSite.initGoogleOneTap(),PlexSite.toggleDynamicMenuItems(),PlexSite.displayPopUps()}),e("#back-to-top").length){var n=null;try{n=sessionStorage.getItem("plex_btt_closed")}catch(e){}var i=0,r=n,o=e(".footer-main"),a=function(){e("#back-to-top").remove(),e("#btt-up").addClass("btt-closed"),r=!1},s=function(){var n=e(t).scrollTop();o.length&&(i=o.offset().top-1e3),n>600&&null===r&&e(".cta-float.btt-float").length?(e("#back-to-top").addClass("show"),i&&n>=i?(e("#back-to-top").removeClass("show"),e("#btt-up").addClass("btt-closed")):null===r&&e("#btt-up").removeClass("btt-closed")):e("#back-to-top").removeClass("show")};s(),e(t).on("scroll",function(){s()}),e(document).on("click","#btt-close",function(e){a(),sessionStorage.setItem("plex_btt_closed",1),e.preventDefault()}),e(document).on("click","#btt-up",function(t){t.preventDefault(),e("html,body").animate({scrollTop:0},700)})}e('a[href*="smart_link=1"]').each(function(){var t=e(this).attr("href"),n=PlexUtils.getApplicableAppStoreURL();n?e(this).attr("href",n):(t=t.replace("smart_link=1","sl=1"),e(this).attr("href",t))});if(e('a[href*="plex_utm=1"]').each(function(){var t=e(this).attr("href");if(/utm_source/.test(t))return Plex.debugLog()&&console.log("skipped adding UTM to: "+t),!0;Plex.debugLog()&&console.log("Link BEFORE UTM's = "+t),t=PlexUtils.getURLWithUTMParams(t),e(this).attr("href",t),Plex.debugLog()&&console.log("Link AFTER UTM's = "+t)}),e(document).on("click",".scrollto",function(t){var n=e(this).data("anchor"),i=void 0!==e(this).data("speed")?e(this).data("speed"):500;t.preventDefault(),e("html, body").animate({scrollTop:e("#"+n).offset().top},i)}),Cookies.defaults={sameSite:"None",secure:!0},e(document).foundation(),plex_l10n.is_mobile&&"undefined"!=typeof FastClick&&FastClick.attach(document.body),e("[smooth-parallax]").length){var l=document.createElement("script");l.src=plex_l10n.path_to_js+"conditional/lib/smooth-parallax.min.js",document.head.appendChild(l),l.onload=function(){SmoothParallax.init()}}})}(jQuery,window),function(e,t){"undefined"==typeof PlexGeo?t.PlexGeo=function(){return{getGeo:function(){var t=e.Deferred();try{var n=sessionStorage.getItem("plex_geo"),i=PlexUtils.sanitizeString(n);if(i=JSON.parse(i),void 0!==i.country)return t.resolve(i)}catch(e){}return e.ajax({dataType:"json",type:"GET",headers:{"X-Plex-Client-Identifier":Plex.getClientIdentifier()},url:PlexUtils.getAPIUrl()+"/api/v2/geoip"}).always(function(e,n){var i=!1;if("error"!==n&&e&&void 0!==e.country){try{sessionStorage.setItem("plex_geo",JSON.stringify(e))}catch(e){}i=e}t.resolve(i)}),t.promise()},getRegion:function(){var t=e.Deferred();return this.getGeo().always(function(e){e&&void 0!==e.subdivisions?t.resolve(e.subdivisions):t.resolve(!1)}),t.promise()},getCountry:function(){var t=e.Deferred();return this.getGeo().always(function(e){e&&void 0!==e.country?t.resolve(e.country):t.resolve(!1)}),t.promise()}}}():console.log("PlexGeo is already defined."),e(document).ready(function(){})}(jQuery,window),function(e,t){"undefined"==typeof PlexCJ&&(t.PlexCJ=function(){var e={initialized:!1,cookieName:"plex_tv_cj",cookieNameCJ:"cje",duration:13,trackingData:{PID:"",AID:"",SID:"",CJEVENT:""},init:function(){e.initialized=!0;var t=PlexUtils.getParam("PID"),n=PlexUtils.getParam("AID"),i=PlexUtils.getParam("SID"),r=PlexUtils.getParam("cjevent");if(void 0===t||void 0===n)return void(Cookies.get(e.cookieName)&&(e.trackingData=Cookies.getJSON(e.cookieName)));var o=PlexUtils.getCookieDomain();e.trackingData={PID:t,AID:n,CJEVENT:r},void 0!==i&&(e.trackingData.SID=i),PlexUtils.isDevelopment()&&(e.trackingData.SID="Test");var a=new Date(moment().add(e.duration,"months").calendar());Cookies.set(e.cookieName,e.trackingData,{domain:o,expires:a}),Cookies.set(e.cookieNameCJ,r,{domain:o,expires:a})}};return e}()),e(document).on("SiteThirdPartyConsentGiven",function(){PlexCJ.initialized||PlexCJ.init()})}(jQuery,window),function(e){"undefined"==typeof PlexAppsFlyer&&(e.PlexAppsFlyer=function(){var t={ready:!1,isDone:!1,init:function(){t.ready=!0,t.metricsEvent("load")},metricsEvent:function(n){if(t.isDone)return!1;var i=e.AF_SDK.utils.cookie.get()||!1,r=0;i&&(r=i.afUserId);var o=Plex.isSignedIn()?Plex.getAuthInfo().id:null;!o&&PlexUtils.getParam("userId")&&(o=PlexUtils.getParam("userId")),PlexMetrics.track("mmp:start",n,{interaction:!1,properties:{page:plex_l10n.curr_page,identifier:r}}),Plex.debugLog()&&console.log("triggered AppsFlyer event - userId = "+o),o&&(t.isDone=1)},convertStoreLinks:function(){var e="https://plexapp.onelink.me/Sm8U/",t=PlexMetrics.getUTMParams()||!1;if(t&&Object.keys(t).length){var n={source:"pid",campaign:"c",medium:"af_channel"};for(var i in t)if(t.hasOwnProperty(i)&&void 0!==n[i]){var r=n[i],o=t[i].replace(/\+/g,"%20");o=decodeURIComponent(o),e=PlexUtils.setURLParameter(e,r,o)}}for(var a=["https://itunes.apple.com/us/app/plex/id383457673","https://play.google.com/store/apps/details?id=com.plexapp.android"],s=0;s<a.length;s++){var l=document.querySelector('a[href*="'+a[s]+'"]')||!1;if(l){var c="";c=a[s].indexOf("itunes.apple")>=0?e.replace("https://plexapp.onelink.me/Sm8U/","https://link.plex.tv/Sm8U/gigvmac8/"):e.replace("Sm8U","Sm8U/android"),l.href=c,Plex.debugLog()&&console.log("DEBUG MESSSAGE: (visible in dev mode ony):\n\nReplaced default store link with AppsFlyer Onelink\n\n"+l.href)}}}};return t}()),document.addEventListener("PlexAFSDKInit",function(t){var n=function(t,i){e.setTimeout(function(){e[t]?i(e[t]):n(t,i)},10)};n("AF_SDK",function(t){PlexUtils.isDevelopment()&&e.AF_SDK.PLUGINS.PBA.turnOnDevMode(),PlexAppsFlyer.init(),e.PlexAppsFlyer.convertStoreLinks(),document.addEventListener("PlexDownloadsOptionChanged",function(t){void 0!==t.detail&&("pht"!==t.detail.product||"ios"!==t.detail.selected&&"android"!==t.detail.selected||e.PlexAppsFlyer.convertStoreLinks())})})})}(window);